# 7장. 순수 하이퍼미디어 설계

## 목차

1. 하이퍼미디어의 대체재는 미디어다
2. HTML의 제약
3. 하이퍼텍스트 애플리케이션 언어
4. 사이렌
5. 의미체계의 문제: 잘 대응하고 있는가?

## 1. 하이퍼미디어의 대체재는 미디어다
> 스위치를 조작하려면 다음 주소로 POST 요청을 보낸다.
> http://api.example.com/switches/{id}?action=flip
> {id}는 스위치 ID다.
> 스위치가 있는 셀에 있을 때에만 스위치를 조작할 수 있다.

라는 문서 (미디어)를 준비하는 것 보다는 

```{html}
<div class="switch>
  <span class="position">down</span>
  <form action="/switches/4" method="post">
    <input class="flip" type="submit"/>
  </form>
</div>
```
> flip을 하기 위해서는 활성화하면 된다.

이렇게 하이퍼미디어로 제공하는 편이 낫다.

- switch id 몰라도 됨.
- '스위치 있는 셀에서만 가능하다' 몰라도 됨.
- post인거 몰라도 됨.
- 주소도 몰라도 됨.

이렇게 인간이 읽어야 하는 내용을 줄이는 것, 즉 **사용자를 편하게 만드는 것**이 목표라고 생각.


## 2. HTML의 제약

대충 HTML4에 여러 제약들이 많았고.. HTML5가 어느 정도 해결은 했지만 전부는 못했다는 것.
예를 들어, PUT또는 DELETE를 사용자가 보내고 싶다면 코딩을 해야만 한다. 이건 **사용자에게 편리하지 않다.**


## 3. 하이퍼텍스트 애플리케이션 언어

HTML은 복잡하다. 그래서 나온 언어들이 있다.
### HAL (Hypertext Application Language)
하이퍼링크만 남기고 나머지는 쳐냈다. 
너무 쳐낸 나머지 정말로 링크만 알려주고, 어떤 요청이 들어가야 하는지는 사용자한테 맡긴다. 그 대신 어떤 요청이던 가능.

```{html}
<resource href="/switches/4">
  <link href="/switches/4" rel="flip" title="Flip the ~~~" />
</resource>
```

> flip을 하기 위해서는 post로 활성화돼야 한다.

=> "API의 프로토콜 의미 체계가 기계가 읽을 수 있는 하이퍼미디어에서 사람이 이해할 수 있는 텍스트로 삐져나오고 있다."

> HAL은 **모든 요청을 혀용**하지만, 설명하려면 사람이 읽을 문서가 많아진다. 즉 **사용자에게 편리하지 않다.**


## 4. 사이렌

**엔티티**를 표현. 한마디로 **복잡하지만 다 때려넣어 뭐든 가능한 표현.**

```{html}
{
  "class" : ["cell"],
  "properties" : { "title": "Hall of Pretzels" },
  "links" : [
    { "rel" : ["current"], "href" : "/cells/H" },
    { "rel" : ["east"], "href" : "/cells/G" },
    { "rel" : ["west"], "href" : "/cells/I" },  
  ] 
  "entities" : [
    { "class" : [" switch "]
      "href" : "/switches/4"
      "rel" : ["item"]
      "properties" : { "position" : ["up"] }
      "actions" : [
        { "name" : "flip",
          "href" : "/switches/4",
          "title" : "Flip the mysterious switch.",
          "method" : "POST"
        }
      ]
    }
  ]
}
```
- 기본적으로 HTML과 뭔가 유사하지만 더 복잡한 관계 표현이 가능할 거 같지 않은가?
  

## 5. 의미체계의 문제: 잘 대응하고 있는가?
결국 의미 체계를 어딘가에 문서화하지 않고서는 불가능하다. 

### Q1.
> 이창준
>
> 클라이언트 개발자가 API의 프로토콜 의미 체계 외로 애플리케이션의 의미 체계를 알아야 하는 이유는 무엇인가요? - p.154

### A1.

어찌 보면 당연한 것. youtube의 링크로 post를 날린다는 프로토콜 의미 체계를 알고 있다고 하자. 사용자가 그것이 영상을 등록하는 것인지, 댓글을 등록하는 것인지, 아니면 조회수를 올리는 것인지를 모르면 문제가 생길 수밖에 없다.

### Q2.
> 박지환
>
> 하이퍼텍스트 애플리케이션 언어(HAL)는 무엇을 위해 탄생했는지 궁금합니다.
> (책 내용만 보면 HAL은 단순히 API에 특화되었다는 특징말고는 HTML에 비해 단점만 있는 것 같은데,
> 원래는 구체적으로 HTML의 어떤 점을 극복하기 위해 만들어졌는지 알고 싶습니다)

### A2.

HTML이 DELETE, PUT과 같이 기존에 지원하는 요청 (상태 전이)를 제외한 요청들에 대해 표현이 불가능하다는 점에서 HAL이 우위에 있는 점이 있다.
또 사용자 중심인 HTML과 달리 기계 판독이 용이하고 API 확장성이 좋다고 한다.
<링크>와 <리소스>만을 남겨 이 구조를 명확하게 표현하는 것은 덤.

### Q3.
> 정시우

> 책에서 사이렌의 장점이 "html 폼보다 더 복잡한 상태 전이를 허용한다"고 했는데,
> 결국 목적을 텍스트로 표현해야 한다면 더 복잡한 상태 전이가 가능하다고 봐야할까요?

### A3.

목적을 텍스트로 표현하는 것 자체는 '복잡한 상태 전이'와는 크게 상관이 없다고 생각한다. 이는 인간 사용자를 위한 코멘트이며,
복잡한 상태 전이가 가능하다는 것은 action 필드가 단순 텍스트 이상의 구조적 데이터를 포함할 수 있고, 추가적인 메타데이터를 얼마든지 넣어놓을 수 있다는 점에서
**복잡한 상태 전이**가 가능하다고 할 수 있다.

### Q4.
> 공병규
>
> 148p에서 html 태그 중 PUT이나 DELETE를 보낼 수 있는 태그가 없다고 하는데, 그 이유가 무엇일까요?

### A4.

- 설계될 당시 사용자 입력을 수집하는 용도가 컸다.
- 보안 및 안정성을 고려한 결과이다. 이는 서버 리소스를 수정하거나 삭제하기 때문.
- 메서드 구현 방식에 대해 명확한 합의가 이루어지지 않았음.

다만 input을 hidden으로 처리하고 넣으면 가능은 하다고 함?
```{html}<input type="hidden" name="_method" value="PUT">```

### Q5.
> 안재우
>
> 146p에서 HTML5의 태그는 숫자를 표현할 수 있는 경우가 있지만
> 일반적으로는 동작하지 않는다고 되어있는데 를 일반적으로는 사용하지 않는 이유와 사용할 수 있는 경우가 궁금합니다

### A5.

<meter>가 사용되지 않는 이유
- 브라우저의 제한적 지원
- 스크린 리더 등이 제대로 해석 못하는 경우 있음. 웹 접근성 측면에서 치명적
- 값의 범위를 표현하는데 그치고, 복잡한 데이터 표현이나 상호작용을 지원하지 않음.
- 대체 요소들이 너무 많다.
